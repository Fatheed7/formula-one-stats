{% extends "base.html" %} {% block content %}

<div class="pageHeader">
  <h4 class="center-align displayName white-text text-shadow">
    {{ seasons.year}} Formula One Season
  </h4>
</div>

<h4 class="light-blue-text text-darken-4 center-align">
  Number of Races: {{ seasons.no_of_races}}
</h4>
{% if drivers | length > 0 %}
<h4 class="light-blue-text text-darken-4 center-align">
  Driver's Championship Winner:
  <a href="{{ url_for('view_driver', driver_id=drivers[0]._id) }}"
    >{{ drivers[0].forename }} {{ drivers[0].surname }}</a
  >
</h4>
{% endif %} {% if constructors | length > 0 %}
<h4 class="light-blue-text text-darken-4 center-align">
  Constructors' Championship Winner:<a
    href="{{ url_for('view_constructor', constructor_id=constructors[0]._id) }}"
  >
    {{ constructors[0].name}}</a
  >
</h4>
{% endif %}
<table class="striped centered">
  <thead>
    <tr>
      <th>Round #</th>
      <th>Circuit</th>
      <th>Race Name</th>
      <th>Date</th>
      <th>Time</th>
      <th>Wikipedia</th>
      <th></th>
      {% if session.user|lower == "admin"|lower %}
      <th>Edit</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
    {% for race in races %} {% if seasons.year == race.year %}
    <tr>
      <td>{{ race.round }}</td>
      <td>
        {% for circuit in circuits %} {% if race.circuitId == circuit.circuitId
        %}
        <a href="{{ url_for('view_circuit', circuit_id=circuit._id) }}"
          >{{ circuit.name }}</a
        >
        {% endif %} {% endfor %}
      </td>
      <td>{{ race.name }}</td>
      <td>{{ race.date }}</td>
      <td>{{ race.time }}</td>
      <td>
        <a
          class="waves-effect waves-light btn"
          target="_blank"
          href="{{ race.url }}"
          ><i class="fa-brands fa-wikipedia-w"></i>View Article</a
        >
      </td>
      <td>
        <a
          href="{{ url_for('view_race', race_id=race._id) }}"
          class="btn green accent-4"
          >View Race</a
        >
      </td>
      {% if session.user|lower == "admin"|lower %}
      <td>
        <a
          href="{{ url_for('edit_race', race_id=race._id) }}"
          class="btn green accent-4"
          >Edit Race</a
        >
      </td>
      {% endif %}
    </tr>
    {% endif %} {% endfor %}
  </tbody>
</table>

{% endblock %}
